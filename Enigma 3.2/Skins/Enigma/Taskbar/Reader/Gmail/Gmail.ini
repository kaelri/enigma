;---------------------------------------------------------------------
; ENIGMA GMAIL

[Rainmeter]
Author=Kaelri
AppVersion=2001000
LeftMouseDoubleClickAction=[!WriteKeyValue Variables Variant1 #Variant2#][!WriteKeyValue Variables Variant2 #Variant3#][!WriteKeyValue Variables Variant3 #Variant4#][!WriteKeyValue Variables Variant4 #Variant5#][!WriteKeyValue Variables Variant5 #Variant6#][!WriteKeyValue Variables Variant6 #Variant#][!Refresh]

[Variables]
@include=#@#Variables\UserVariables.inc
NumberOfItems=Loading...

;---------------------------------------------------------------------
; STYLES

@include2=#@#Styles\#Stylesheet#\Variables.inc
@include3=#@#Styles\#Stylesheet#\TaskbarCommon.inc
Variant1=Icon
Variant2=IconRight
Variant3=Textless
Variant4=Normal
Variant5=Mini
Variant6=Tiny

;---------------------------------------------------------------------
; MEASURES

[MeasureFeed]
Measure=Plugin
Plugin=Plugins\WebParser.dll
UpdateRate=120
URL=https://#GmailUsername#:#GmailPassword#@gmail.google.com/gmail/feed/atom
RegExp=(?siU)(.*)$
DecodeCharacterReference=1
Substitute=#WebParserSubstitute#
FinishAction=!CommandMeasure "MeasureScriptReader" "Update()"

[MeasureScriptReader]
Measure=Script
ScriptFile="#@#Measures\Reader.lua"
Disabled=1
FeedMeasureName=MeasureFeed

[MeasureNewMail]
Measure=CALC
Formula=#NumberOfItems#>0
DynamicVariables=1

;---------------------------------------------------------------------
; METERS

[Background]
Meter=Image
MeterStyle=Style#Variant#Background

[Icon]
Meter=IMAGE
MeterStyle=Style#Variant#Icon | StyleGmailIcon
MeasureName=MeasureNewMail
LeftMouseUpAction=["#FeedLink#]
DynamicVariables=1

[Number]
Meter=STRING
MeterStyle=Style#Variant#Text
Text=#NumberOfItems#
LeftMouseUpAction=["#ItemLink1#"][!Redraw]
DynamicVariables=1

[Label]
Meter=STRING
MeterStyle=Style#Variant#Label
Text="MAIL"

;---------------------------------------------------------------------
; METADATA

[Metadata]
Name=Enigma Gmail
Information=This skin alerts you to unread messages in your Gmail inbox. |  Thanks to jessydior for the parsing method. |  Double-click to switch to the next variant. |  Middle-click to refresh. |  Load Enigma\Options.ini to change options for this skin.
Version=3.1
License=Creative Commons Attribution-Non-Commercial-Share Alike 3.0